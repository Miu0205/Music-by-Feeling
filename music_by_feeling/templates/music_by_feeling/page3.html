<!-- /music_by_feeling/templates/music_by_feeling/page3.html
メイン画面：曲を聴くボタンを押すと4にpage4に飛ぶ
過去に聞いた曲などの閲覧機能（？）-->

<!doctype html>
<html>
<style type="text/css">
  <!--
    body{
      background-color: #f5f5f5;
    }

  h2{
    padding: 0.25em;
    font-size: 200%;
    color: #364e96;
    border-left: solid 5px #364e96;

  }

  h3.c3{
    font-size: 150%;
    text-decoration: underline;
  }

  p{
    font-size: 110%;
    color: #364e96;
  }

  a{
    text-decoration: none;
    color: #364e96;
    font-size: 110%;

  }

  a:hover {
    font-weight: bold;
  }
  -->
</style>
    <head>

        <title>曲を聴く</title>

    </head>
    <body>

        <ul>
            <br>
                <li><div>

                  <label for="scales"><p>なりたい気分を選択</p></label>

                  <p>悲<input type="range" min="0" max="10" value="5" id="select_feeling_1">楽</p>

                  <p>落<input type="range" min="0" max="10" value="5" id="select_feeling_2">アクティブ</p>


                </div></li>



                <li>
                  <p><label for="name">アーティスト名：</label>
                  <input type="text" id="name" name="name" required minlength="4" maxlength="8" size="10">
                </li>


                <li><label for="pet-select"><p>ジャンル:</label>
                  <select name="pets" id="pet-select">
                    <option value="">選択してください</option>
                    <option value="dog">1</option>
                    <option value="cat">2</option>
                    <option value="hamster">3</option>
                  </select></li>

                <li><label for="pet-select"><p>年代:</label>
                  <select name="jpop_hits" id="jpop_hits_select">
                    <option value="">選択してください</option>
                    <option value="2022">2022年</option>
                    <option value="2021">2021年</option>
                    <option value="2020">2020年</option>
                  </select></li>



                <li><div>
                  <p><input type="checkbox" id="scales" checked>
                  <label for="scales">人気の曲から選ぶ</label>
                </div></li>



            {% for category in category_list %}
                <a href="{% url 'music_by_feeling:music_by_feeling_category' category %}">
                    <li>{{ category }}></li>
                </a>
            {% endfor %}
        </ul>

        <form action="{% url 'music_by_feeling:spotifyLoad' %}" method="post">
            {% csrf_token %}
            <div class="field">
              <input type="hidden" name="feeling_1" id="feeling_1">
              <input type="hidden" name="feeling_2" id="feeling_2">
              <input type="hidden" name="select_year" id="select_year">

            </div>
            <input type="submit" onclick="select_year_reflect()" value="音楽を聴く">
        </form>

            <br>
            <hr>

        <a href="{% url 'music_by_feeling:index' %}">
          <button type="button">メインページに戻る</button></a>

    <br><br>
<br>
    {% for music in music_list %}
    ＊

    悲・楽(1~10)：{{ music.feeling_1}}<br>
    落・アクティブ(1~10)：{{ music.feeling_2}}<br>
    アーティスト名：{{ music.artist}}<br>
    ジャンル：{{ music.genre}}<br>
    年代：{{ music.era}}<br>
    有名：{{music.famous}}<br><br>


    {% endfor %}





        {% block content %}
        {% endblock %}

    </body>
</html>

<script>

    var elm1 = document.getElementById('jpop_hits_select');
    var elm2 = document.getElementById('select_year');
    var num = elm1.selectedIndex;
    elm2.value = elm1.selectedIndex;
//    elm2.value = elm1.options[num].value;

    let f1_1 = document.getElementById('select_feeling_1');
    let f1_2 = document.getElementById('feeling_1');
    f1_2.value = f1_1.value / 10;

    let f2_1 = document.getElementById('select_feeling_2');
    let f2_2 = document.getElementById('feeling_2');
    f2_2.value = f2_1.value / 10;




    console.log("select:"+elm1.value);
    console.log("select:"+elm1.selectedIndex);
    var num = elm1.selectedIndex;
    console.log("select:"+elm1.options[num].value);

    function select_year_reflect() {
      //年代選択反映
      num = elm1.selectedIndex;
      elm2.value = elm1.options[num].value;
//      elm2.value = elm1.selectedIndex;
      console.log("select:"+elm1.selectedIndex);
      console.log("select:"+elm1.options[num].value);



      f1_2.value = f1_1.value / 10;
      f2_2.value = f2_1.value / 10;
      console.log("f1_1:"+f1_1+", f1_2:"+f1_2.value);
    }

</script>
